# 釣り糸製造BOM管理システム - 社内ステージング環境

## 概要

このステージング環境は、社内メンバーがプロトタイプを安全にテストできる環境です。
本番環境とは完全に分離されており、自由にデータを追加・編集・削除できます。

## アクセス方法

### 環境起動

```bash
# ステージング環境を起動
python app_staging.py
```

### URL

- **ステージング環境**: http://localhost:5003
- **システム状況API**: http://localhost:5003/api/status

## 機能

### 基本機能
- ✅ アイテム管理（追加・編集・削除）
- ✅ BOM構造管理
- ✅ 多階層BOM表示
- ✅ 検索・フィルタリング
- ✅ Oracle連携データの閲覧

### ステージング専用機能
- 🔄 **データベースリセット機能**
- 📊 **システム状況モニタリング**
- 🏷️ **環境識別表示**
- 🧪 **サンプルデータ自動生成**

## データ構造

### サンプルデータ

ステージング環境には以下のサンプルデータが含まれています：

- **完成品**: 各種釣り糸製品
- **製紐糸**: 編み上げられた糸
- **原糸**: 基本的な原材料
- **梱包資材**: スプール、パッケージ等

### アイテムタイプ（工程順）

1. 完成品
2. 製紐糸
3. PS糸
4. 染色糸
5. 後PS糸
6. 巻き取り糸
7. 原糸
8. 芯糸
9. 成形品
10. 梱包資材

## 使い方

### 1. アイテムの追加
1. 「アイテム追加」をクリック
2. 必須フィールドを入力
3. 拡張属性（糸構成、色、編み方など）を設定
4. 「追加」ボタンをクリック

### 2. BOM構造の作成
1. 「BOM構成追加」をクリック
2. 親アイテムと構成部品を選択
3. 数量と用途を設定
4. 「追加」ボタンをクリック

### 3. BOM構造の確認
1. アイテム一覧から「BOM」ボタンをクリック
2. 多階層のBOM構造を確認
3. 各構成部品の詳細を確認

### 4. データのリセット
1. ナビゲーションバーの「リセット」ボタンをクリック
2. 確認ダイアログで「OK」をクリック
3. サンプルデータが再生成されます

## 注意事項

### ⚠️ 重要
- **このはステージング環境です** - データは永続化されません
- **自由にテストしてください** - データを壊しても問題ありません
- **リセット機能を活用してください** - いつでも初期状態に戻せます

### 制限事項
- Oracle DBへの実際の接続は行いません
- メール送信などの外部連携機能は無効化されています
- パフォーマンステストには適していません

## トラブルシューティング

### よくある問題

#### ポート5003が使用中の場合
```bash
# プロセスを確認
lsof -i :5003

# プロセスを終了
kill -9 [プロセスID]
```

#### データベースエラーの場合
```bash
# ステージング用データベースを削除
rm bom_database_staging.db

# 再起動
python app_staging.py
```

#### 依存関係エラーの場合
```bash
# 仮想環境を再作成
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## フィードバック

### テスト項目チェックリスト

- [ ] アイテム追加機能
- [ ] BOM構成追加機能
- [ ] 検索・フィルタリング機能
- [ ] BOM構造表示機能
- [ ] データリセット機能
- [ ] ユーザビリティ（使いやすさ）
- [ ] 表示の見やすさ
- [ ] 操作の分かりやすさ

### フィードバック方法

テスト結果やご意見は以下の方法でお聞かせください：
- 直接口頭で報告
- メールでの詳細レポート
- システム状況APIを使った技術的な調査結果

## 開発環境との違い

| 項目 | 開発環境 | ステージング環境 |
|------|----------|------------------|
| ポート | 5002 | 5003 |
| データベース | bom_database_enhanced.db | bom_database_staging.db |
| Oracle接続 | 有効 | 無効（サンプルデータ使用） |
| リセット機能 | なし | あり |
| 環境表示 | なし | あり |
| デバッグモード | 有効 | 無効 |

## 次のステップ

ステージング環境でのテストが完了したら：
1. フィードバックを開発チームに共有
2. 必要な改善点を議論
3. 本番環境への展開を検討

---

**お疲れ様です！何かご不明な点がございましたら、お気軽にお声がけください。** 