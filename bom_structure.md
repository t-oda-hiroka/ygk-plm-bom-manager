以下では、原糸 → 最終製品まで多段階で姿・名称が変化する“釣り糸”を対象に、\*\*マルチレベル・ロットトレーサビリティ型 BOM（Bill of Materials／部品表）\*\*をどのように設計・運用すべきかを体系的にまとめます。
重点は ①原糸ロットから完成品まで“さかのぼれる”・“たどれる”実績系統図の確立、②工程ごとに異なる管理単位（kg ↔ m ↔ 個）と品質区分を矛盾なくハンドリング、③組糸・芯糸など工程内での“多本取り／複合加工”を正しく表現――の３点です。

---

## 1. 基本設計方針

| # | 方針                                                             | ねらい                                                                  |
| - | -------------------------------------------------------------- | -------------------------------------------------------------------- |
| 1 | **「品目（Item）」と「ロット（Lot）」を分離**し、BOMは品目レベルで階層構造、ロット情報はトランザクションで持つ | 品番は静的属性（糸種・規格）を表し、ロットは動的属性（製造日、品質、長さ実測等）を保持することで、マスタ乱立と再設定コストを最小化    |
| 2 | **工程＝BOMレベル**の“多層BOM”を採用（最大９階層）                                | 各工程アウトプットを１レベルとし、「親（後工程ロット）」‐「子（使用ロット）」のツリーを持たせることで、材料→仕掛→製品を直線的にリンク |
| 3 | **ロット世代記録 (Lot Genealogy) を一次情報源**とし、BOMは“工程レシピ ＋ 系統図”の２面構成    | 「予定BOM（レシピ）」と「実績BOM（系統図）」を分け、計画変更・端下品取り回し等の現場判断を実績側で忠実に残す            |
| 4 | **単位／換算情報を階層ごとに固定**（㎏ → 近似 m → 実測 m → 個）し、“確定度フラグ”で実数か概算かを明示   | 長さ不確定ゆえの在庫差異・歩留まり差異を把握しやすくし、下位工程ほど差異調整を最小化                           |
| 5 | **品質グレードはロット属性・用途区分は品目属性**で管理                                  | 「B 格」「端下品」などは同一品目内でロット個別管理し、芯糸転用／廃棄等の用途判定は後工程の消費トランザクションで制御          |
| 6 | **バーコード／QR シールを媒介に“現品情報”＝“システム情報”を同期**                         | センサーシール貼替え・染色シール貼替えなどの現場作業をシステム上のロット更新トリガとして取り込む                     |

---

## 2. 階層構造と主要データ要素

| BOMレベル (工程)  | 親アイテムの呼称例         | 主な数量単位   | 主要マスタ属性 (品目)       | 主なロット属性 (動的)             |
| ------------ | ----------------- | -------- | ------------------ | ------------------------ |
| L1 原糸        | NY66  70 dtex RAW | kg       | 原料メーカー, デシテックス, 糸種 | 仕入先ロットNo, 入荷重量, 原糸等級     |
| L2 PS糸       | NY66  70 dtex PS  | kg       | 延伸倍率, PS設備No       | PSロットNo, A/B格, 糸切れ回数     |
| L3 木管巻糸      | 〃 Winder          | 近似 m     | 木管サイズ, キャップ色, 撚り方向 | WinderロットNo, ケース番号, 外観検査 |
| L4 製紐糸 (ボビン) | 〃 Braided         | 近似 m     | 撚本数, 芯糸有無, 製紐機条件   | 製紐ロットNo, 長さ近似, 芯糸ロット     |
| L5 センサー糸     | 〃 Braided SENS    | **実測 m** | ―                  | センサー実測長, 繋ぎ方式, 端下量       |
| L6 染色糸       | 〃 Dyed            | 近似 m     | 色名, 系列名            | 染色ロットNo, 染色条件, 後PS指示     |
| L7 後PS糸      | 〃 Dyed & PS       | 近似 m     | 延伸量, 折加工有無         | 後PSロットNo, 折加工履歴          |
| L8 巻仕掛       | 〃 Spool WIP       | **実測 m** | 巻量規格, スプール種        | 巻ロットNo, 外観検査結果           |
| L9 製品        | 〃 (完成品)           | 個／ケース    | 製品品番, 梱包資材, JAN    | ケースNo, 出荷日, 検査証          |

> **ポイント**
>
> * 「芯糸」は L4 の**子部品**として消費される。芯糸自身は L2／L3 を経由する場合と購入品の場合の２系列を持つが、いずれも品目コードは“芯糸カテゴリ”に属させる。
> * 「B 格品 → 芯糸転用」は L2 ロット属性“Grade=B”をキーに、L4 取り込み時に子部品置換（代替BOM）として実績登録。
> * 拾い直し・端下品再利用は **同レベル内**での「リワークBOM」として、親子で同一アイテム＋異ロットを紐づける。

---

## 3. ロット系統図（Genealogy）の持ちかた

```
製品ロット 21‑06‑A001
   └─ 巻ロット 21‑06‑E045  (Spool)
        └─ 染色ロット 21‑05‑C112
             ├─ センサーロット 21‑05‑B067
             │     └─ 製紐ロット 21‑05‑A048
             │           ├─ Winderロット 21‑04‑W311
             │           │     └─ PSロット 21‑04‑P087 (Grade A)
             │           │           └─ 原糸ロット TY‑210331‑17
             │           └─ 芯糸ロット 21‑04‑P081 (Grade B 転用)
             │                 └─ 原糸ロット TY‑210228‑03
             └─ …(その他色ロット)
```

* **ツリー１本＝完成品１ロット**
* **ノード＝ロット**、エッジ＝“親ロットを構成する子ロット数量”
* **副産物（端下品）は兄弟ノードとして生成**し、“用途＝廃棄／転用”を属性で示す

ERP/MES では、上図を動的に生成できる「ロット・トレーサビリティレポート」を必須機能とする。

---

## 4. マスタ設計の要点

### 4‑1. 品番体系

```
<大分類>-<素材>-<規格>-<加工種>-<色>-<仕様派生>
例: NY66-070D-PS-WDR-SZ-Z20
```

* 加工種（PS / WDR / BRAID / SENS / DYED / PS2 / SPL / FG）は**工程レベルを示す記号**として固定化
* 規格（デニール・延伸量・撚数など）のうち「工程で変わらない物理量」を上位に寄せ、色や巻長など後工程でしか確定しない属性は下位またはロット属性へ

### 4‑2. ロット番号規則

```
<YY><MM><工程コード><連番 3桁>  (例: 2506P087)
```

* 工程コードは P=PS, W=Winder, B=Braid, S=Sensor, C=Coloring, E=Spool, F=Finished
* システム自動払い出し＋現場ラベル印字用バーコードと同期

### 4‑3. 品質コード

| 区分 | 意味  | 処理指針            |
| -- | --- | --------------- |
| A  | 合格  | 原則、下位工程へ投入可     |
| A0 | 軽微難 | 自社使用優先          |
| B  | 代用  | 芯糸専用／要ラベル色替     |
| S  | 端下  | 自動廃棄 or 指定回収ロット |

---

## 5. システム実装・運用イメージ

| 項目              | 実装ポイント                      |
| --------------- | --------------------------- |
| **ERP**         | 品目マスタ、予定BOM、在庫（ロット別）        |
| **MES**         | 実績BOM生成、ロット払い出し、バーコード発行     |
| **ハンディ/ラベル発行機** | シール貼替時にロット更新トリガ             |
| **BI ダッシュボード**  | 歩留まり・品質傾向分析（レベル間差異、品質コード比率） |

---

## 6. 典型的な例外シナリオと設計対応

| シナリオ         | 設計上の扱い                                |
| ------------ | ------------------------------------- |
| **糸切れ再結束**   | 同レベル re‑work BOM（親＝同ロット、子＝端下ロット）で実績登録 |
| **異ロット混在巻き** | “混合ロット”属性を親ロットに付与、子ロット欄に複数ロットを列挙      |
| **染色ロット分割**  | 親ロット＝染色釜ロット、子ロット＝釜内ボビン単位ロット（シリアル）     |
| **B格→芯糸転用**  | 在庫引当時に“使用目的＝芯糸のみ可”チェック、BOMで自動代替       |

---

## 7. 導入ステップ（ロードマップ案）

1. **As‑Is 棚卸し**

   * 各工程で実際に使われているラベル・帳票を収集／現物観察
   * 既存Excel／Access管理のロット情報を洗い出し

2. **マスタ統一 & コード設計**

   * 品番体系とロット番号規則を確定
   * 「品質コード」「確定度フラグ」辞書テーブルを制定

3. **MES モジュール開発**

   * ロット払い出し・バーコード発行・実績BOM自動生成ロジック
   * 端下・リワーク・混合処理の業務画面

4. **段階導入**

   * L1〜L3（PS まで）をパイロット → 歩留まり実績検証
   * 以後 L4〜L6（製紐〜染色）、L7〜L9（後PS〜完成品）へ拡張

5. **教育・運用定着**

   * シール貼付タイミング・ハンディ入力手順の標準化
   * 品質トレーサビリティ報告書フォーマットを統一

---

## まとめ

* **品目（静的）とロット（動的）を切り分け、工程＝階層のマルチレベルBOMで管理**することで、加工段階ごとに姿を変える“糸”を無理なく一元管理できる。
* **ロット系統図をBOMの中心**に据え、バーコードで現品とシステムをリアルタイム連携させることで、品質クレーム時の“秒単位逆追跡”が可能。
* 長さ／重量／個数といった**異なる計量単位は階層で固定し、確定度フラグで精度を明示**することで在庫差異の発生点が特定しやすくなる。
* **B格・端下・リワーク**など“例外の多い現場運用”をあらかじめBOM／システム設計に折り込み、属人的判断をトランザクションとして残すことで、後工程の判断材料とする。
* 最終的に、本方針に基づくBOMを実装することで、**全工程トレーサビリティ、品質傾向の可視化、在庫精度の向上、製番／ロット体系の標準化**を同時に実現できる。
